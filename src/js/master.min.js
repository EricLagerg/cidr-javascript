/*

 @copyright
 Copyright 2014 Eric Lagergren

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var c=document;if(window.navigator.standalone){var h;c.addEventListener("click",function(g){for(h=g.target;"A"!==h.nodeName&&"HTML"!==h.nodeName;)h=h.parentNode;-1!==h.href.indexOf("http")&&-1!==h.href.indexOf(c.location.host)&&(g.preventDefault(),c.location.href=h.href)},!1)}!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||window.navigator.standalone?c.getElementById("iphoneinstall").classList.toggle("hidden"):(c.getElementsByTagName("body")[0].setAttribute("style","margin-top:40px;"),c.getElementsByTagName("body")[0].classList.toggle("no-touch"));window.applicationCache.addEventListener("updateready",function(){window.applicationCache.swapCache()},!1);function v(){function g(a){var d=a.split(".");4===d.length&&""!==a||m();for(a=0;4>a;a++){var b=+d[a];(b!=d[a]||0>b||255<b)&&m()}}function w(a){var d,b;for(d=b=0;4>d;d++)b<<=8,b+=+a[d];return b>>>0}function n(a){return[a>>>24,a>>16&255,a>>8&255,a&255].join(".")}function x(a){a=a.split(".");for(var d=0,b=0;4>d;)b=(b<<8|+a[d++])>>0;b-=b>>>1&1431655765;b=(b&858993459)+(b>>>2&858993459);return 16843009*(b+(b>>>4)&252645135)>>>24}function z(a){if(128>a)return"255.0.0.0";if(192>a)return"255.255.0.0";if(224>a)return"255.255.255.0";if(256>a)return"255.255.255.255";m();return""}function m(){var a=document;a.getElementById("tablecidr").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablesubmask").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebinarysub").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenumhosts").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablewildcardmask").innerHTML="Invalid IP/Submask entered.";a.getElementById("tableipclass").innerHTML="Invalid IP/Submask entered.";a.getElementById("tableiptohex").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebinaryip").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenetworkid").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebroadcastaddress").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenetworkrange").innerHTML="Invalid IP/Submask entered.";throw Error("Invalid IP/Submask entered");}var f=c.forms.valuebox.submask.value,k,l=c.forms.valuebox.ip.value,e;32>=f&&(e=+f,k=n(-1<<32-e));4===f.split(".").length&&(e=x(f),k=f);if(c.forms.valuebox.cb.checked||32<f)e=0!==f?32-Math.ceil(Math.log(f)/Math.log(2)):0,k=n(-1<<32-e);e||(k=z(+l.split(".")[0]),e=x(k));if(void 0===e||isNaN(e)||null===e)return null;isNaN(e)&&m();var f=l.split("."),u=k.split(".");g(l);g(k);var l=function(a){a=a||0;2<=a&&(a=Math.pow(2,32-a)-2);return a}(e),l=2<=l?l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,p=w(f),q=w(u),u=n(p&q),y=n(p|~q),A=function(a){if(128>a)return"Class A";if(192>a)return"Class B";if(224>a)return"Class C";if(240>a)return"Class D";if(256>a)return"Class E";m();return""}(+f[0]),q=n(~q),p="0x"+p.toString(16).toUpperCase(),r=u.split("."),t=y.split(".");r[3]=(+r[3]+1).toString();t[3]=(+t[3]-1).toString();r=r.join(".");t=t.join(".");c.getElementById("tablecidr").innerHTML=e;c.getElementById("tablesubmask").innerHTML=k;c.getElementById("tablebinarysub").innerHTML=function(a){for(var d="",b="";d.length<a;)d+="1";for(;b.length<32-a;)b+="0";return(d+b).replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(e);c.getElementById("tablenumhosts").innerHTML=l;c.getElementById("tablewildcardmask").innerHTML=q;c.getElementById("tableipclass").innerHTML=A;c.getElementById("tableiptohex").innerHTML=p;c.getElementById("tablebinaryip").innerHTML=function(a){for(var d="",b="",e=0;4>e;e++){for(b=(+a[e]).toString(2);8>b.length;)b="0"+b;d+=b}return d.replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(f);c.getElementById("tablenetworkid").innerHTML=u;c.getElementById("tablebroadcastaddress").innerHTML=y;c.getElementById("tablenetworkrange").innerHTML=r+" - "+t}window.onload=function(){document.getElementsByTagName("form")[0].onsubmit=function(g){g.preventDefault();v();window.scrollTo(0,document.body.scrollHeight)};document.onkeypress=function(g){13==(window.event?g.which:g.keyCode)&&v()&&document.forms.valuebox.submit()}};
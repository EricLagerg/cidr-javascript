/*

 @copyright
 Copyright 2014 Eric Lagergren

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var c=document;if(window.navigator.standalone){var f;c.addEventListener("click",function(e){for(f=e.target;"A"!==f.nodeName&&"HTML"!==f.nodeName;)f=f.parentNode;-1!==f.href.indexOf("http")&&-1!==f.href.indexOf(c.location.host)&&(e.preventDefault(),c.location.href=f.href)},!1)}!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||window.navigator.standalone?c.getElementById("iphoneinstall").classList.toggle("hidden"):(c.getElementsByTagName("body")[0].setAttribute("style","margin-top:40px;"),c.getElementsByTagName("body")[0].classList.toggle("no-touch"));window.applicationCache.addEventListener("updateready",function(){window.applicationCache.swapCache()},!1);function t(){function e(a){var r=a.split(".");4===r.length&&""!==a||k();for(a=0;4>a;a++){var b=+r[a];(b!=r[a]||0>b||255<b)&&k();r[a]=b}}function u(a){var b;b=0+(+a[0]<<24>>>0);b+=+a[1]<<16>>>0;b+=+a[2]<<8>>>0;return b+=+a[3]>>>0}function l(a){return[a>>24&255,a>>16&255,a>>8&255,a&255].join(".")}function v(a){a=a.split(".").reduce(function(a,b){return(a<<8|b)>>>0});a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24}function x(a){if(128>a)return"255.0.0.0";if(192>a)return"255.255.0.0";if(224>a)return"255.255.255.0";if(256>a)return"255.255.255.255";k()}function k(){var a=document;a.getElementById("tablecidr").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablesubmask").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebinary").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenumhosts").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenumsubnets").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablewildcardmask").innerHTML="Invalid IP/Submask entered.";a.getElementById("tableipclass").innerHTML="Invalid IP/Submask entered.";a.getElementById("tableiptohex").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenetworkid").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebroadcastaddress").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenetworkrange").innerHTML="Invalid IP/Submask entered.";throw Error("Invalid IP/Submask entered");}var d=c.form.submask.value,g=c.form.ip.value,h,b;32>=d&&(b=d,h=l(-1<<32-b));4===d.split(".").length&&(b=v(d),h=d);if(c.form.cb.checked||32<d)b=0!==d?32-Math.ceil(Math.log(d)/Math.log(2)):0,h=l(-1<<32-b);b||(h=x(+g.split(".")[0]),b=v(h));if("undefined"===b||isNaN(b)||null===b)return null;isNaN(b)&&k();var s=g.split("."),d=h.split(".");e(g);e(h);var g=function(a){a=a||0;2<=a&&(a=Math.pow(2,32-a)-2);return a}(b),g=2<=g?g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,m=u(s),n=u(d),d=l(m&n),w=l(m|~n&4294967295),s=function(a){if(128>a)return"Class A";if(192>a)return"Class B";if(224>a)return"Class C";if(240>a)return"Class D";if(256>a)return"Class E";k()}(s[0]),y=function(a){return(a%=8)?Math.pow(2,a):Math.pow(2,8)}(b),n=l(~n),m="0x"+m.toString(16).toUpperCase(),p=d.split("."),q=w.split(".");p[3]=+p[3]+1;q[3]=+q[3]-1;p=p.join(".");q=q.join(".");c.getElementById("tablecidr").innerHTML=b;c.getElementById("tablesubmask").innerHTML=h;c.getElementById("tablebinary").innerHTML=function(a){for(var b="",d="";b.length<a;)b+="1";for(;d.length<32-a;)d+="0";return(b+d).replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(b);c.getElementById("tablenumhosts").innerHTML=g;c.getElementById("tablenumsubnets").innerHTML=y;c.getElementById("tablewildcardmask").innerHTML=n;c.getElementById("tableipclass").innerHTML=s;c.getElementById("tableiptohex").innerHTML=m;c.getElementById("tablenetworkid").innerHTML=d;c.getElementById("tablebroadcastaddress").innerHTML=w;c.getElementById("tablenetworkrange").innerHTML=p+" - "+q}window.onload=function(){document.getElementsByTagName("form")[0].onsubmit=function(e){e.preventDefault();t();window.scrollTo(0,document.body.scrollHeight)};document.onkeypress=function(e){13==(window.event?e.which:e.keyCode)&&t()&&document.forms.form.submit()}};
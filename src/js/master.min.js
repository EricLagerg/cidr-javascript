/*

 @copyright
 Copyright 2014 Eric Lagergren

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var c=document;if(window.navigator.standalone){var g;c.addEventListener("click",function(f){for(g=f.target;"A"!==g.nodeName&&"HTML"!==g.nodeName;)g=g.parentNode;-1!==g.href.indexOf("http")&&-1!==g.href.indexOf(c.location.host)&&(f.preventDefault(),c.location.href=g.href)},!1)}!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||window.navigator.standalone?c.getElementById("iphoneinstall").classList.toggle("hidden"):(c.getElementsByTagName("body")[0].setAttribute("style","margin-top:40px;"),c.getElementsByTagName("body")[0].classList.toggle("no-touch"));window.applicationCache.addEventListener("updateready",function(){window.applicationCache.swapCache()},!1);function u(){function f(a){var e=a.split(".");4===e.length&&""!==a||l();for(a=0;4>a;a++){var b=+e[a];(b!=e[a]||0>b||255<b)&&l()}}function v(a){var e;e=0+(+a[0]<<24>>>0);e+=+a[1]<<16>>>0;e+=+a[2]<<8>>>0;return e+=+a[3]>>>0}function m(a){return[a>>24&255,a>>16&255,a>>8&255,a&255].join(".")}function w(a){a=a.split(".");x=+a[0]<<8|+a[1];x+=+a[1]<<8|x;x+=+a[2]<<8|x;x+=+a[3]<<8|x;x-=x>>>1&1431655765;x=(x&858993459)+(x>>>2&858993459);return 16843009*(x+(x>>>4)&252645135)>>>24}function z(a){if(128>a)return"255.0.0.0";if(192>a)return"255.255.0.0";if(224>a)return"255.255.255.0";if(256>a)return"255.255.255.255";l();return""}function l(){var a=document;a.getElementById("tablecidr").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablesubmask").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebinarysub").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenumhosts").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenumsubnets").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablewildcardmask").innerHTML="Invalid IP/Submask entered.";a.getElementById("tableipclass").innerHTML="Invalid IP/Submask entered.";a.getElementById("tableiptohex").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebinaryip").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenetworkid").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablebroadcastaddress").innerHTML="Invalid IP/Submask entered.";a.getElementById("tablenetworkrange").innerHTML="Invalid IP/Submask entered.";throw Error("Invalid IP/Submask entered");}var d=c.forms.valuebox.submask.value,h,k=c.forms.valuebox.ip.value,b;32>=d&&(b=+d,h=m(-1<<32-b));4===d.split(".").length&&(b=w(d),h=d);if(c.forms.valuebox.cb.checked||32<d)b=0!==d?32-Math.ceil(Math.log(d)/Math.log(2)):0,h=m(-1<<32-b);b||(h=z(+k.split(".")[0]),b=w(h));if(void 0===b||isNaN(b)||null===b)return null;isNaN(b)&&l();var d=k.split("."),t=h.split(".");f(k);f(h);var k=function(a){a=a||0;2<=a&&(a=Math.pow(2,32-a)-2);return a}(b),k=2<=k?k.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0,n=v(d),p=v(t),t=m(n&p),y=m(n|~p&4294967295),A=function(a){if(128>a)return"Class A";if(192>a)return"Class B";if(224>a)return"Class C";if(240>a)return"Class D";if(256>a)return"Class E";l();return""}(+d[0]),B=function(a){return(a%=8)?Math.pow(2,a):Math.pow(2,8)}(b),p=m(~p),n="0x"+n.toString(16).toUpperCase(),q=t.split("."),r=y.split(".");q[3]=(+q[3]+1).toString();r[3]=(+r[3]-1).toString();q=q.join(".");r=r.join(".");c.getElementById("tablecidr").innerHTML=b;c.getElementById("tablesubmask").innerHTML=h;c.getElementById("tablebinarysub").innerHTML=function(a){for(var e="",b="";e.length<a;)e+="1";for(;b.length<32-a;)b+="0";return(e+b).replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(b);c.getElementById("tablenumhosts").innerHTML=k;c.getElementById("tablenumsubnets").innerHTML=B;c.getElementById("tablewildcardmask").innerHTML=p;c.getElementById("tableipclass").innerHTML=A;c.getElementById("tableiptohex").innerHTML=n;c.getElementById("tablebinaryip").innerHTML=function(a){for(var b="",d="",f=0;4>f;f++){for(d=(+a[f]).toString(2);8>d.length;)d="0"+d;b+=d}return b.replace(/(.{8})(.{8})(.{8})/g,"$1.$2.$3.")}(d);c.getElementById("tablenetworkid").innerHTML=t;c.getElementById("tablebroadcastaddress").innerHTML=y;c.getElementById("tablenetworkrange").innerHTML=q+" - "+r}window.onload=function(){document.getElementsByTagName("form")[0].onsubmit=function(f){f.preventDefault();u();window.scrollTo(0,document.body.scrollHeight)};document.onkeypress=function(f){13==(window.event?f.which:f.keyCode)&&u()&&document.forms.valuebox.submit()}};